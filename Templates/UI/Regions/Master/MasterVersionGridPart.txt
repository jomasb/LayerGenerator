<UserControl.Resources>
	<ResourceDictionary>
		<ResourceDictionary.MergedDictionaries>
			<ResourceDictionary Source="pack://application:,,,/Dcx.Plus.UI.WPF.FW.Shell;component/Themes/Generic.xaml" />
			<!--<plus:PlusDesignTimeResourceDictionary Source="pack://application:,,,/Dcx.Plus.UI.WPF.FW.Shell;component/Themes/Generic.xaml" />-->
		</ResourceDictionary.MergedDictionaries>

		<Style
			x:Key="GridViewRow.Parent"
			BasedOn="{StaticResource GridViewRow.Standard}"
			TargetType="{x:Type plus:PlusGridViewRow}">

			<Setter Property="IsSelected" Value="{Binding MetaItem.IsSelected, Mode=TwoWay}" />

			<Setter Property="plus:PlusSpinnerContainer.IsLoading" Value="{Binding Versions.IsLoading}" />

			<Setter Property="IsExpanded">
				<Setter.Value>
					<MultiBinding Converter="{StaticResource MultiBoolAndConverter}" Mode="TwoWay">
						<Binding Mode="TwoWay" Path="MetaItem.IsExpanded" />
						<Binding Mode="TwoWay" Path="Versions.IsLoadingTriggered" />
					</MultiBinding>
				</Setter.Value>
			</Setter>

			<Style.Triggers>
				<DataTrigger Binding="{Binding State, Mode=TwoWay}" Value="New">
					<Setter Property="CanExpand" Value="False" />
				</DataTrigger>
			</Style.Triggers>
		</Style>

		<Style
			x:Key="GridViewRow.Parent.Alternate"
			BasedOn="{StaticResource GridViewRow.Parent}"
			TargetType="{x:Type plus:PlusGridViewRow}">
			<Setter Property="Background" Value="{StaticResource Brush.GridView.Row.Even.Background}" />
		</Style>

		<Style
			x:Key="GridViewRow.Child"
			BasedOn="{StaticResource GridViewRow.Standard}"
			TargetType="{x:Type plus:PlusGridViewRow}">
			<Setter Property="IsSelected" Value="{Binding MetaItem.IsSelected, Mode=TwoWay}" />
		</Style>

		<DataTemplate x:Key="DataTemplate.GridViewRow.Child" > <!-- DataType="{x:Type dataItems:BestLocatingProfileDataItem}" -->
			<plus:PlusGridView
				Margin="0 0 0 2"
				AlternationCount="0"
				ItemsSource="{Binding Versions}"
				RowStyle="{StaticResource GridViewRow.Child}"
				ScrollViewer.VerticalScrollBarVisibility="Auto"
				SelectionMode="Single"
				ShowColumnHeaders="False">

				<plus:PlusGridView.Columns>
					$specialContent2$
				</plus:PlusGridView.Columns>
			</plus:PlusGridView>
		</DataTemplate>
	</ResourceDictionary>

</UserControl.Resources>

<plus:PlusGridView
	x:Name="Filtered$Item$GridView"
	VerticalAlignment="Stretch"
	AlternateRowStyle="{StaticResource GridViewRow.Parent.Alternate}"
	HierarchyChildTemplate="{StaticResource DataTemplate.GridViewRow.Child}"
	IsSynchronizedWithCurrentItem="False"
	ItemsSource="{Binding FilterCollection}"
	RowStyle="{StaticResource GridViewRow.Parent}"
	plus:PlusSpinnerContainer.IsLoading="{Binding $Product$$Item$DataItemsList.IsLoading}">

	<i:Interaction.Behaviors>
		<selection:SingleActiveItemBehavior ActiveItem="{Binding ActiveItem, Mode=TwoWay}" />
	</i:Interaction.Behaviors>

	<i:Interaction.Triggers>
		<selection:RoutedEventTrigger RoutedEvent="selection:SelectionHelper.SelectionChanging">
			<prism:InvokeCommandAction Command="{Binding SelectingActiveItemCommand}" TriggerParameterPath="CancelableSelectionArgs" />
		</selection:RoutedEventTrigger>
	</i:Interaction.Triggers>

	<plus:PlusGridView.Columns>
	$specialContent1$
	</plus:PlusGridView.Columns>

	<telerik:RadGridView.ChildTableDefinitions>
		<telerik:GridViewTableDefinition>
			<telerik:GridViewTableDefinition.Relation>
				<telerik:PropertyRelation ParentPropertyName="Versions" />
			</telerik:GridViewTableDefinition.Relation>
		</telerik:GridViewTableDefinition>
	</telerik:RadGridView.ChildTableDefinitions>
</plus:PlusGridView>